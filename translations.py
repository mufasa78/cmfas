"""
Translations for Chinese and English languages
"""

translations = {
    'en': {
        # Common elements
        'site_title': 'Chinese Medicine Prescription Analysis',
        'dashboard': 'Dashboard',
        'analytics': 'Analytics',
        'prescriptions': 'Prescriptions',
        'formula_optimization': 'Formula Optimization',
        'knowledge_graph': 'Knowledge Graph',
        'import_data': 'Import Data',
        'welcome': 'Welcome to the Chinese Medicine Prescription Analysis System',
        'welcome_description': 'This platform provides tools for analyzing traditional Chinese medicine prescriptions, visualizing medicinal material usage patterns, and optimizing formulations based on machine learning.',
        
        # Dashboard statistics
        'medicinal_materials': 'Medicinal Materials',
        'prescription_formulas': 'Prescription Formulas',
        'efficacy_categories': 'Efficacy Categories',
        'recent_prescriptions': 'Recent Prescriptions',
        'top_materials': 'Top Used Materials',
        'view_all': 'View All',
        'quick_analysis': 'Quick Analysis',
        'no_prescriptions': 'No prescriptions found. Add a prescription to get started.',
        'no_materials': 'No medicinal materials found. Import data to get started.',
        
        # Province stats page
        'province_stats': 'Province Statistics',
        'materials_by_province': 'Medicinal Materials by Province',
        'province_description': 'This visualization shows the distribution of medicinal materials produced in each province across China. Understanding regional production patterns helps in analyzing the geographical characteristics of Chinese medicine resources.',
        'province': 'Province',
        'num_materials': 'Number of Medicinal Materials',
        'percentage': 'Percentage',
        'total': 'Total',
        'province_data': 'Province Data Table',
        'no_province_data': 'No province data available. Please import medicinal material data with province information.',
        
        # Material stats page
        'material_usage': 'Material Usage',
        'material_stats': 'Medicinal Material Usage Statistics',
        'usage_frequency': 'Medicinal Material Usage Frequency',
        'usage_description': 'This visualization shows the frequency of use of each medicinal material across all prescriptions in the database. Materials that appear more frequently are essential components in traditional Chinese medicine.',
        'usage_distribution': 'Material Usage Distribution',
        'usage_insights': 'Material Usage Insights',
        'key_insights': 'Key Insights:',
        'material_clustering': 'Material Clustering',
        'clustering_description': 'This visualization clusters medicinal materials based on their properties, flavors, and usage patterns. Similar materials are grouped together, revealing natural categories within Chinese medicine pharmacology.',
        
        # Property distribution page
        'property_distribution': 'Distribution of Properties, Flavors, and Meridians',
        'about_properties': 'About Properties, Flavors, and Meridians',
        'tcm_attributes': 'In traditional Chinese medicine, medicinal materials are classified by three key attributes:',
        'five_properties': 'Five Properties (五性)',
        'five_properties_desc': 'Cold (寒), Hot (热), Warm (温), Cool (凉), and Neutral (平). These describe the material\'s effect on the body\'s temperature balance.',
        'five_flavors': 'Five Flavors (五味)',
        'five_flavors_desc': 'Sour (酸), Bitter (苦), Sweet (甘), Spicy (辛), and Salty (咸). These flavors correspond to therapeutic actions and target organs.',
        'meridian_tropism': 'Meridian Tropism (归经)',
        'meridian_tropism_desc': 'Indicates which organ/meridian system the herb primarily affects, such as Lung, Liver, Heart, Spleen, Kidney, etc.',
        'understanding_distribution': 'Understanding these distributions helps practitioners create balanced prescriptions targeting specific conditions.',
        'property_distribution_title': 'Five Properties Distribution (五性)',
        'flavor_distribution_title': 'Five Flavors Distribution (五味)',
        'meridian_distribution_title': 'Meridian Distribution (归经)',
        'no_property_data': 'No property data available. Please import medicinal material data with property information.',
        'no_flavor_data': 'No flavor data available. Please import medicinal material data with flavor information.',
        'no_meridian_data': 'No meridian data available. Please import medicinal material data with meridian information.',
        'property_flavor_meridian': 'Property, Flavor, and Meridian Data',
        
        # Top prescriptions page
        'top_prescriptions': 'Top Prescriptions by Efficacy',
        'top_prescriptions_desc': 'Below are the top prescriptions that can be used for the efficacy: {}. This analysis helps practitioners identify the most common formulations for specific therapeutic purposes.',
        'prescription_name': 'Prescription Name',
        'description': 'Description',
        'num_materials': 'Number of Materials',
        'actions': 'Actions',
        'view': 'View',
        'no_description': 'No description',
        'no_prescriptions_efficacy': 'No prescriptions found for this efficacy category.',
        'top_materials_efficacy': 'Top Medicinal Materials for {}',
        'top_materials_desc': 'These are the most frequently used medicinal materials in prescriptions for {}. Understanding which materials are commonly used for specific efficacies helps in formulation design.',
        'material_name': 'Material Name',
        'occurrence_count': 'Occurrence Count',
        'no_material_data_efficacy': 'No material data available for this efficacy category.',
        
        # Formula optimization page
        'formula_optimization_title': 'Formula Optimization',
        'formula_optimization_desc': 'This tool uses machine learning to optimize Chinese medicine formulations based on symptoms and desired efficacy. The system analyzes patterns from traditional prescriptions to suggest the most appropriate combination of medicinal materials for specific health conditions.',
        'symptoms_conditions': 'Symptoms or Conditions',
        'symptoms_desc': 'Describe the symptoms or health conditions in detail. Include information about severity, duration, and any relevant patient characteristics.',
        'base_materials': 'Base Materials (Optional)',
        'base_materials_desc': 'Select specific materials you want to include in the formulation. Leave empty to let the system optimize from scratch.',
        'generate_formula': 'Generate Optimized Formula',
        'optimization_results': 'Optimization Results',
        'recommended_formula': 'Recommended Formula',
        'explanation': 'Explanation',
        'important_note': 'Important',
        'optimization_warning': 'This recommendation is based on pattern recognition and historical data analysis. It should be reviewed by a qualified practitioner before implementation. Individual patient characteristics and contraindications must be carefully considered.',
        'recent_optimizations': 'Recent Optimizations',
        'symptoms': 'Symptoms',
        'recommended_materials': 'Recommended Materials',
        'no_materials': 'No materials',
        'based_on': 'Based on:',
        'not_specified': 'Not specified',
        'no_optimization_history': 'No optimization history found. Use the form above to generate optimized formulas.',
        'how_it_works': 'How Formula Optimization Works',
        'historical_data': 'Historical Data Analysis',
        'historical_data_desc': 'The system analyzes thousands of traditional prescriptions to identify patterns and relationships.',
        'machine_learning': 'Machine Learning',
        'machine_learning_desc': 'Advanced algorithms learn which materials work well together for specific conditions.',
        'property_balancing': 'Property Balancing',
        'property_balancing_desc': 'The system balances the five properties and flavors for harmonious formulations.',
        'interaction_analysis': 'Interaction Analysis',
        'interaction_analysis_desc': 'Potential synergistic and antagonistic interactions between materials are considered.',
        'algo_improvement': 'The optimization algorithm improves over time as more prescriptions and material data are added to the system.',
        
        # Knowledge graph page
        'knowledge_graph_title': 'Chinese Medicine Knowledge Graph',
        'knowledge_graph_desc': 'This knowledge graph visualizes the relationships between medicinal materials and prescriptions in Chinese medicine. The graph reveals connections, interactions, and patterns that might not be evident in traditional data representations.',
        'graph_tip': 'Tip: You can drag nodes to rearrange the graph, zoom with the mouse wheel, and click on nodes for more information.',
        'reset': 'Reset',
        'filter': 'Filter',
        'filter_options': 'Filter Options',
        'prescription_filters': 'Prescription filters coming soon',
        'about_knowledge_graph': 'About the Knowledge Graph',
        'material_nodes': 'Material Nodes',
        'material_nodes_desc': 'Blue circles represent medicinal materials. Each material has properties, flavors, and meridian associations. The size of the node indicates how frequently it\'s used in prescriptions.',
        'prescription_nodes': 'Prescription Nodes',
        'prescription_nodes_desc': 'Green circles represent prescriptions. These nodes connect to the materials they contain. The size of the node indicates the number of materials in the prescription.',
        'contains_relationships': 'Contains Relationships',
        'contains_relationships_desc': 'Gray lines connect prescriptions to the materials they contain, showing the composition of each formula.',
        'interaction_relationships': 'Interaction Relationships',
        'interaction_relationships_desc': 'Colored lines between materials indicate interactions:',
        'synergistic': 'Synergistic (materials enhance each other)',
        'antagonistic': 'Antagonistic (materials may counteract each other)',
        'other_interaction': 'Other interaction types',
        'graph_applications': 'Knowledge Graph Applications',
        'formula_development': 'Formula Development',
        'formula_development_desc': 'By analyzing the connections between materials and prescriptions, practitioners can identify common combinations and patterns that have proven effective, informing the development of new formulations.',
        'interaction_identification': 'Interaction Identification',
        'interaction_identification_desc': 'The graph helps identify potential synergistic or antagonistic interactions between medicinal materials, which is crucial for safe and effective prescription formulation.',
        'knowledge_discovery': 'Knowledge Discovery',
        'knowledge_discovery_desc': 'By exploring the graph, researchers can discover previously unknown relationships and patterns in traditional Chinese medicine, potentially leading to new therapeutic insights.',
        'educational_tool': 'Educational Tool',
        'educational_tool_desc': 'The visual representation of connections between materials and prescriptions serves as a powerful educational tool for students learning about traditional Chinese medicine systems.',
        
        # Data import page
        'import_data_title': 'Import Data',
        'import_data_desc': 'Use this form to import data into the system. You can upload CSV files containing information about medicinal materials or prescriptions. Make sure your file follows the required format.',
        'import_type': 'Import Type',
        'select_import_type': 'Select import type',
        'materials_option': 'Medicinal Materials',
        'prescriptions_option': 'Prescriptions',
        'csv_file': 'CSV File',
        'csv_file_desc': 'Upload a CSV file with the data to import.',
        'upload_process': 'Upload and Process',
        'recent_import_logs': 'Recent Import Logs',
        'date': 'Date',
        'filename': 'Filename',
        'type': 'Type',
        'rows_imported': 'Rows Imported',
        'status': 'Status',
        'success': 'Success',
        'partial': 'Partial',
        'error': 'Error',
        'no_import_logs': 'No import logs found. Start by importing some data.',
        'materials_csv_format': 'Medicinal Materials CSV Format',
        'materials_csv_desc': 'Your CSV file for medicinal materials should contain the following columns:',
        'column': 'Column',
        'description': 'Description',
        'required': 'Required',
        'yes': 'Yes',
        'no': 'No',
        'name_desc': 'Name of the medicinal material',
        'pinyin_desc': 'Pinyin transliteration',
        'english_name_desc': 'English name of the material',
        'province_origin_desc': 'Province where the material originates',
        'property_desc': 'Five properties (cold, hot, warm, cool, neutral)',
        'flavor_desc': 'Five flavors (sour, bitter, sweet, spicy, salty)',
        'meridian_desc': 'Meridian tropism (which organ/meridian it affects)',
        'description_desc': 'Description of the material',
        'example': 'Example',
        'materials_example': 'name,pinyin,english_name,province_origin,property,flavor,meridian,description\n人参,Ren Shen,Ginseng,Jilin,warm,sweet,Lung,Tonifies Qi and promotes blood production',
        'prescriptions_csv_format': 'Prescriptions CSV Format',
        'prescriptions_csv_desc': 'Your CSV file for prescriptions should contain the following columns:',
        'name_desc_p': 'Name of the prescription',
        'description_desc_p': 'Description of the prescription',
        'efficacy_desc': 'What the prescription treats',
        'materials_desc': 'List of materials in format: "name1:amount1,name2:amount2"',
        'efficacy_categories_desc': 'Comma-separated list of efficacy categories',
        'prescriptions_example': 'name,description,efficacy,materials,efficacy_categories\n四物汤,Classical women\'s tonic,Blood deficiency,当归:9g,白芍:9g,川芎:6g,熟地黄:9g,Blood tonifying,Women\'s health',
        'prescriptions_note': 'Note: Materials must already exist in the database before importing prescriptions that reference them.'
    },
    
    'zh': {
        # Common elements
        'site_title': '中药处方分析系统',
        'dashboard': '仪表盘',
        'analytics': '分析',
        'prescriptions': '处方',
        'formula_optimization': '方剂优化',
        'knowledge_graph': '知识图谱',
        'import_data': '数据导入',
        'welcome': '欢迎使用中药处方分析系统',
        'welcome_description': '该平台提供分析传统中药处方、可视化药材使用模式以及基于机器学习优化配方的工具。',
        
        # Dashboard statistics
        'medicinal_materials': '药材',
        'prescription_formulas': '处方配方',
        'efficacy_categories': '功效类别',
        'recent_prescriptions': '最近处方',
        'top_materials': '常用药材',
        'view_all': '查看全部',
        'quick_analysis': '快速分析',
        'no_prescriptions': '未找到处方。添加处方以开始使用。',
        'no_materials': '未找到药材。导入数据以开始使用。',
        
        # Province stats page
        'province_stats': '各省统计',
        'materials_by_province': '各省药材分布',
        'province_description': '此可视化展示了中国各省产出的药材分布情况。了解区域性产出模式有助于分析中药资源的地理特征。',
        'province': '省份',
        'num_materials': '药材数量',
        'percentage': '百分比',
        'total': '总计',
        'province_data': '省份数据表',
        'no_province_data': '无省份数据可用。请导入带有省份信息的药材数据。',
        
        # Material stats page
        'material_usage': '药材使用情况',
        'material_stats': '药材使用统计',
        'usage_frequency': '药材使用频率',
        'usage_description': '此可视化展示了所有处方中各药材的使用频率。出现频率较高的材料是传统中医药中的重要组成部分。',
        'usage_distribution': '药材使用分布',
        'usage_insights': '药材使用洞察',
        'key_insights': '关键见解：',
        'material_clustering': '药材聚类',
        'clustering_description': '此可视化基于药材的性质、味道和使用模式进行聚类。相似的药材被归为一组，揭示中医药理学中的自然分类。',
        
        # Property distribution page
        'property_distribution': '性味归经分布',
        'about_properties': '关于性味归经',
        'tcm_attributes': '在传统中医中，药材按三个关键属性分类：',
        'five_properties': '五性',
        'five_properties_desc': '寒、热、温、凉和平。这些描述了药材对身体温度平衡的影响。',
        'five_flavors': '五味',
        'five_flavors_desc': '酸、苦、甘、辛和咸。这些味道对应治疗作用和靶器官。',
        'meridian_tropism': '归经',
        'meridian_tropism_desc': '表示药材主要影响哪个器官/经络系统，如肺、肝、心、脾、肾等。',
        'understanding_distribution': '了解这些分布有助于医师制定针对特定症状的平衡处方。',
        'property_distribution_title': '五性分布',
        'flavor_distribution_title': '五味分布',
        'meridian_distribution_title': '归经分布',
        'no_property_data': '无性质数据可用。请导入带有性质信息的药材数据。',
        'no_flavor_data': '无味道数据可用。请导入带有味道信息的药材数据。',
        'no_meridian_data': '无归经数据可用。请导入带有归经信息的药材数据。',
        'property_flavor_meridian': '性味归经数据',
        
        # Top prescriptions page
        'top_prescriptions': '按功效分类的常用处方',
        'top_prescriptions_desc': '以下是可用于功效：{}的常用处方。此分析有助于医师识别特定治疗目的的常用配方。',
        'prescription_name': '处方名称',
        'description': '描述',
        'num_materials': '药材数量',
        'actions': '操作',
        'view': '查看',
        'no_description': '无描述',
        'no_prescriptions_efficacy': '未找到此功效类别的处方。',
        'top_materials_efficacy': '{}的常用药材',
        'top_materials_desc': '这些是{}处方中最常用的药材。了解特定功效常用的药材有助于配方设计。',
        'material_name': '药材名称',
        'occurrence_count': '出现次数',
        'no_material_data_efficacy': '无此功效类别的药材数据可用。',
        
        # Formula optimization page
        'formula_optimization_title': '方剂优化',
        'formula_optimization_desc': '此工具使用机器学习根据症状和期望功效优化中药配方。系统分析传统处方的模式，为特定健康状况推荐最合适的药材组合。',
        'symptoms_conditions': '症状或病况',
        'symptoms_desc': '详细描述症状或健康状况。包括严重程度、持续时间和任何相关的患者特征。',
        'base_materials': '基础药材（可选）',
        'base_materials_desc': '选择您想要包含在配方中的特定药材。留空让系统从头开始优化。',
        'generate_formula': '生成优化配方',
        'optimization_results': '优化结果',
        'recommended_formula': '推荐配方',
        'explanation': '解释',
        'important_note': '重要提示',
        'optimization_warning': '此推荐基于模式识别和历史数据分析。实施前应由合格的医师审核。必须仔细考虑个体患者特征和禁忌症。',
        'recent_optimizations': '最近优化',
        'symptoms': '症状',
        'recommended_materials': '推荐药材',
        'no_materials': '无药材',
        'based_on': '基于：',
        'not_specified': '未指定',
        'no_optimization_history': '未找到优化历史。使用上面的表单生成优化配方。',
        'how_it_works': '方剂优化的工作原理',
        'historical_data': '历史数据分析',
        'historical_data_desc': '系统分析成千上万的传统处方，识别模式和关系。',
        'machine_learning': '机器学习',
        'machine_learning_desc': '高级算法学习哪些药材能为特定条件良好协同工作。',
        'property_balancing': '性质平衡',
        'property_balancing_desc': '系统平衡五性五味，形成和谐配方。',
        'interaction_analysis': '相互作用分析',
        'interaction_analysis_desc': '考虑药材间潜在的协同和拮抗作用。',
        'algo_improvement': '随着更多处方和药材数据的添加，优化算法会不断改进。',
        
        # Knowledge graph page
        'knowledge_graph_title': '中医药知识图谱',
        'knowledge_graph_desc': '此知识图谱可视化中医药材和处方之间的关系。图谱揭示了在传统数据表示中可能不明显的连接、相互作用和模式。',
        'graph_tip': '提示：您可以拖动节点重新排列图谱，使用鼠标滚轮缩放，并点击节点获取更多信息。',
        'reset': '重置',
        'filter': '筛选',
        'filter_options': '筛选选项',
        'prescription_filters': '处方筛选即将推出',
        'about_knowledge_graph': '关于知识图谱',
        'material_nodes': '药材节点',
        'material_nodes_desc': '蓝色圆圈代表药材。每种药材都有性质、味道和归经关联。节点大小表示它在处方中使用的频率。',
        'prescription_nodes': '处方节点',
        'prescription_nodes_desc': '绿色圆圈代表处方。这些节点连接到它们包含的药材。节点大小表示处方中药材的数量。',
        'contains_relationships': '包含关系',
        'contains_relationships_desc': '灰色线条连接处方与其包含的药材，显示每个配方的组成。',
        'interaction_relationships': '相互作用关系',
        'interaction_relationships_desc': '药材之间的彩色线条表示相互作用：',
        'synergistic': '协同（药材相互增强）',
        'antagonistic': '拮抗（药材可能相互抵消）',
        'other_interaction': '其他相互作用类型',
        'graph_applications': '知识图谱应用',
        'formula_development': '配方开发',
        'formula_development_desc': '通过分析药材和处方之间的联系，医师可以识别已证明有效的常见组合和模式，为新配方的开发提供信息。',
        'interaction_identification': '相互作用识别',
        'interaction_identification_desc': '图谱有助于识别药材之间潜在的协同和拮抗作用，这对于安全有效的处方配方至关重要。',
        'knowledge_discovery': '知识发现',
        'knowledge_discovery_desc': '通过探索图谱，研究人员可以发现传统中医药中以前未知的关系和模式，潜在地引导出新的治疗见解。',
        'educational_tool': '教育工具',
        'educational_tool_desc': '药材和处方之间连接的可视化表示，为学习传统中医药系统的学生提供了强大的教育工具。',
        
        # Data import page
        'import_data_title': '数据导入',
        'import_data_desc': '使用此表单将数据导入系统。您可以上传包含药材或处方信息的CSV文件。确保您的文件遵循所需格式。',
        'import_type': '导入类型',
        'select_import_type': '选择导入类型',
        'materials_option': '药材',
        'prescriptions_option': '处方',
        'csv_file': 'CSV文件',
        'csv_file_desc': '上传包含要导入数据的CSV文件。',
        'upload_process': '上传并处理',
        'recent_import_logs': '最近导入日志',
        'date': '日期',
        'filename': '文件名',
        'type': '类型',
        'rows_imported': '导入行数',
        'status': '状态',
        'success': '成功',
        'partial': '部分成功',
        'error': '错误',
        'no_import_logs': '未找到导入日志。开始导入一些数据。',
        'materials_csv_format': '药材CSV格式',
        'materials_csv_desc': '您的药材CSV文件应包含以下列：',
        'column': '列',
        'description': '描述',
        'required': '必需',
        'yes': '是',
        'no': '否',
        'name_desc': '药材名称',
        'pinyin_desc': '拼音音译',
        'english_name_desc': '英文名称',
        'province_origin_desc': '产地省份',
        'property_desc': '五性（寒、热、温、凉、平）',
        'flavor_desc': '五味（酸、苦、甘、辛、咸）',
        'meridian_desc': '归经（影响哪个器官/经络）',
        'description_desc': '药材描述',
        'example': '示例',
        'materials_example': 'name,pinyin,english_name,province_origin,property,flavor,meridian,description\n人参,Ren Shen,Ginseng,吉林,温,甘,肺经,补气生血',
        'prescriptions_csv_format': '处方CSV格式',
        'prescriptions_csv_desc': '您的处方CSV文件应包含以下列：',
        'name_desc_p': '处方名称',
        'description_desc_p': '处方描述',
        'efficacy_desc': '处方治疗的病症',
        'materials_desc': '药材列表格式："名称1:用量1,名称2:用量2"',
        'efficacy_categories_desc': '逗号分隔的功效类别列表',
        'prescriptions_example': 'name,description,efficacy,materials,efficacy_categories\n四物汤,经典女性补剂,血虚,当归:9g,白芍:9g,川芎:6g,熟地黄:9g,补血,妇科',
        'prescriptions_note': '注意：在导入引用药材的处方之前，药材必须已存在于数据库中。'
    }
}

def get_text(key, lang='en', *args):
    """
    Get translated text for a given key and language
    
    Args:
        key (str): Translation key
        lang (str): Language code ('en' or 'zh')
        *args: Optional arguments for string formatting
    
    Returns:
        str: Translated text
    """
    if lang not in translations:
        lang = 'en'  # Fallback to English
        
    if key not in translations[lang]:
        # Fallback to English if key not found in specified language
        return translations['en'].get(key, key)
    
    text = translations[lang][key]
    
    # Apply string formatting if arguments are provided
    if args:
        try:
            text = text.format(*args)
        except:
            pass
            
    return text